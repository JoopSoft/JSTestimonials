/*! jQuery ellipsis - v1.1.1 - 2014-02-23
* https://github.com/STAR-ZERO/jquery-ellipsis
* Copyright (c) 2014 Kenji Abe; Licensed MIT */
(function(n){n.fn.ellipsis=function(t){var i={row:1,onlyFullWords:!1,char:"...",callback:function(){},position:"tail"};return t=n.extend(i,t),this.each(function(){var i=n(this),r=i.html(),h=r,u=h.length,p=i.height(),o,c,y;i.html("a");var v=parseFloat(i.css("lineHeight"),10),l=i.height(),w=v>l?v-l:0,a=w*(t.row-1)+l*t.row;if(p<=a){i.html(r);t.callback.call(this);return}var f=1,e=0,s=r.length;if(t.position==="tail"){while(f<s)e=Math.ceil((f+s)/2),i.html(r.slice(0,e)+t.char),i.height()<=a?f=e:s=e-1;r=r.slice(0,f);t.onlyFullWords&&(r=r.replace(/[\u00AD\w\uac00-\ud7af]+$/,""));r+=t.char}else if(t.position==="middle"){for(o=0;f<s;)e=Math.ceil((f+s)/2),o=Math.max(u-e,0),i.html(h.slice(0,Math.floor((u-o)/2))+t.char+h.slice(Math.floor((u+o)/2),u)),i.height()<=a?f=e:s=e-1;o=Math.max(u-f,0);c=h.slice(0,Math.floor((u-o)/2));y=h.slice(Math.floor((u+o)/2),u);t.onlyFullWords&&(c=c.replace(/[\u00AD\w\uac00-\ud7af]+$/,""));r=c+t.char+y}i.html(r);t.callback.call(this)}),this}})(jQuery);